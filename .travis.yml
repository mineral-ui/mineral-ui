language: node_js
env:
before_script:
- set -e
- echo "$TEST_SUITE"
- if [[ "$TEST_SUITE" == "units" ]]; then npm run build; fi
script:
- if [[ "$TEST_SUITE" == "units" ]]; then npm run test; fi
- if [[ "$TEST_SUITE" == "happo" ]]; then bash scripts/happo-ci.sh; fi
notifications:
  flowdock:
    secure: nDmveWk8FxW7X27JTblJs+UoDLUPp74dN1BW2klZUcGgolzvTRPn7T7oNuMgcFKK4/14SBYOwNuDoK4I2z3cUzT6BdU9xwzWuNnMtsSUGrvgJzbJornbP2vpAHAWA4Fk2FX7+RtdIRSEdctxis4R0sVei19uDJw6DaJNfRfUHzwKuJPbIwHx9smTVJ5IqkTZE9BE1ZEYZgunSrxq7OJAVYC/m1R7dA/6NqbAiYZpoQQdrDZb8p1NNpislg3RDj5DpT1Ax/0orBe/DqUX5PN9ELGQ7LbWVdYdEOhzTUDCN2NFvpNC13wgUCWGIbLtR8jpQNcfaaQqovFmnd++K7Ay6Em8z4/+zyy26DKRPS3nxoMQTGjdCWj3ESvOT2vuxAmJG/6F5BW7mOFwrDe4uMAYHuawEIRUtuFW0+qC7dTOJ+hEeZ49wvpqDTRx8l1+uXmRTcjiWKp0Wm/88Rrl0+JcDkrzR6RfLhf8aFKAMbayax13E/0HSdTpy4fdP2WDrHpW2xCv+hB9K7NuQA9fYz+aMFuG4X6R1vZ0SjLPWICnGa1FSShWv6ss104KumW1j01Iqth+H7ZVXnQCAsciRAir2zDNSkW2awzGn5dpvW5dKfWcAYJgk8UoINu+yAcQCiGUcqAeX3NCz4xv6n3Sz7x2jORZM93tNMNGIC7DfhKMqb4=
env:
  matrix:
  - TEST_SUITE=units
  - TEST_SUITE=happo
  global:
    # HAPPO_KEY env variable
  - secure: EDAvKjL5TxgJ5BwoRC2Lwsb2odLAyWQifMSffTCZN9GjId+SaX2sXk+wg2bQOLXUM4SKps09CpqDafM9XtGupruOevvIUVIN89DOUe7pQeYjiTOZs3+nrXIkSGrOp4SfHpGzRHZXQX466cxIpzl444vsHtVy7V+Ulq9lE3jYb5j2PlpuTCKMuKuQlO3C6oi9sRc66Vv0Th0n3fp7bInNIt+E+fUiVuugLoSFf2KGeEkAvMu5zXj6JlJYftJXxdD9hj97wvQv20dn/SyIG8wNx5UTB6wpRsbdTR4M3us2beriQJ1Tjd1vta3Rby4k7KOIWNtccztTPMnASpjwk81M1Wlb9iNzv7p72y5gF7jPzqMfEPQqrNPgygIXom9tl1h27MnQGIYSkR/jVMmBVFaM41/MH44kXZwfWNRC64kRvlCaXCApQqXR9g42drhOj6yV6/mjE43RVhMAdMlDOL4u5+gGHJRGenYY/4hEPuB60DGBD4SiuTJJpuRDhMwOWqCnQDm7ooppmVuaxVEcOdzZBTbgYpyRbBjiotr+bQKAl5icB/zvVaLKgVrS4hAPScmeIsW6nxdUVSP6URInAmG5EOn+VnCMWVGRzUXuSMhTLzPh1O+QMiXWvcUDNnUHiDkxJ6afwxP7CKizVzauc/974CrBuhwZmwneRod5FAfW1S8=
    # HAPPO_SECRET env variable
  - secure: pOPsATwc9qCnJhLUdxWWHb1VlTZly+9WTrTY+xzPM2s0DLWjy6PQN3ig/VfktATlrD3QSg3KI1e2fNkO0uxuy82bRQbvq3ItNKH5GQGz3OEnoPG8RfNWqfH6rUdYwY3+BJ09LcjrloJ5X1c2zA24M/ti97iYZi8vd7n2CMCKPwtY2cFZPwpa1Rnf9WaQpo0Ni5B7PVv9+GlAHh4vxs3uy/EhfPLy7DssHwBjsyvKyQ0NyZxsQoZnhpoIYnMYJZFzyzJ+bC/uuvj6u46ubz3YcdOWniDJzQImQQ/SOsLYMkp46HHvd++ccfNM4dEakQu7dVt1pFViz+nxH25NMHQpFXhw4mqYjT+2EtaZlvwEsUjfX8cxy/WvszsDj6iqN0cv/+GZgnBPH0dfi1/IA8cRI7G2xKLE7aU0bWouzwIbdZCJZWzSpEcoz4bom1A4MJWC6+Uuvz3BZPQxbfXTzLCwhShydnfJc0FlbNatqJrZeuUeURXyDW4VcJqMNNsZgqoZkTAyHzfbOXK90tCw47uWl+Qm2a3q2h5VL81wATl5yrVj+1aouczasEKPdrDSNbX2o0aHke7n/C905OJyFVwJR5eEIMgMqvwrA9QMr3S77zfyJwJmLUlFbpj9r6fXqNhVxblNoCCIRfhDA2e7wAgnfWc0yoaBBvlDFFoJj+bvDxo=
    # GHE_TOKEN env variable (post comments on PRs)
  - secure: P4jevqjqU28W9geNR8TR2UN8IUeGiEHUMwG1mXbdim2sfo4wzzqEN/iuPZ5iu4NDeUJ9XW9iOSKkWcbVNEZlRdQC9+Hzk/+UXzfoI9KdFYaO3zPIyqcSA80xLbnvce4DslxC4kGWeT0Vts5H8Yw5aWpKLyvf90FXvaghehgj6Zu5zYjR1PhixKGxRY+vwuB58NSEV57Uw5KO/B6skveAGNjCNEmsy2iwF7BNFC6Yr+HLCHLwbOXP1KlRJgPZMoDL4+Lz+01+zlN3M4p80G5zy99wIg5ZfyNSE9FHRN7ASy3e7pQdmNC842oRilxSRt50GG/mmTYj8PqTjQapeFRiClMzqQ1JH+tR/xe1hreytSCiR9hOXuWZZevykyPIJjurc9u/WEbt9AuWO7JILzOBKRlpDE+Rs8A4e+agb0kEeyqO7l8wXGm9o2b9qjToAO7OI0ZiKxCNv00FjrNmmr3e8hXEjkWSnj5QRaa8AOTkZVB2YFrGREiBKmRcaz42b7HuSq6emXaWgKMFNCjIpStAUF6vMD1jjK31sGTWYeGHDVxh5AScTZLe01SqtR9cqYjIPzKgqCo6N4JDEugd5ulP0gCDEh/6RQojUEyz5zvOLDWeI/l6X3dh86sSx+liLb2iBj5WTP7AOl7UDQUNlqmK3pmbTcw/S5PZICi9EEnNFQ4=
